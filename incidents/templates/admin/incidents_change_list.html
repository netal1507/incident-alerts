{% extends "admin/change_list.html" %}
{% load static %}

{% block content %}
<h2>Incident Dashboard</h2>

<div style="display: flex; gap: 2rem;">
    <div style="flex: 1; padding: 1rem; border: 1px solid #ccc;">
        <h3>Open Incidents: {{ open_count }}</h3>
    </div>
    <div style="flex: 1; padding: 1rem; border: 1px solid #ccc;">
        <h3>Closed Incidents: {{ closed_count }}</h3>
    </div>
</div>

<canvas id="statusChart" width="400" height="200"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('statusChart').getContext('2d');
    const statusChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Open', 'Closed'],
            datasets: [{
                label: 'Incident Status',
                data: [{{ open_count }}, {{ closed_count }}],
                backgroundColor: ['#FF6384', '#36A2EB']
            }]
        }
    });
</script>

{% endblock %}
